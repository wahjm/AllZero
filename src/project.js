require=function n(t,e,c){function o(r,a){if(!e[r]){if(!t[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var d=e[r]={exports:{}};t[r][0].call(d.exports,function(n){var e=t[r][1][n];return o(e||n)},d,d.exports,n,t,e,c)}return e[r].exports}for(var i="function"==typeof require&&require,r=0;r<c.length;r++)o(c[r]);return o}({Box:[function(n,t,e){"use strict";cc._RF.push(t,"62389y+uadPTJGqhfielIEY","Box"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.js=this}}),cc._RF.pop()},{}],DylButton:[function(n,t,e){"use strict";cc._RF.push(t,"5992eJo0MtH7Jo2j6vqw7PP","DylButton"),cc.Class({extends:cc.Component,properties:{nextScene:"",nextLevel:!1,restart:!1,exitGame:!1,openUrl:"",touchFun:{default:null,type:cc.Component.EventHandler},audio:{default:null,url:cc.AudioClip}},onLoad:function(){this.myInit()},myInit:function(){var n=this,t=this.node.opacity;this.node.on("touchstart",function(t){n.node.opacity=.5*n.node.opacity,n.node.setScale(1.2)}),this.node.on("touchend",function(e){n.node.opacity=t,n.node.setScale(1),n.onClick()}),this.node.on("touchcancel",function(t){n.node.setScale(1)})},onClick:function(){if(this.audio&&cc.audioEngine.play(this.audio,!1,1),this.touchFun&&""!==this.touchFun.handler&&this.touchFun.emit(),""!==this.openUrl&&(cc.log(this.openUrl),cc.sys.openURL(this.openUrl)),""!==this.nextScene)return cc.director.loadScene(this.nextScene);if(this.nextLevel){var n=cc.director.getScene().name,t=n.replace(/[^0-9]/gi,""),e=n.split(t);if(1===e.length)return cc.error("这个关卡命名有问题，不是只有一个数字");t=Number(t)+1;var c=e[0]+String(t)+e[1];return cc.director.loadScene(c)}if(this.exitGame){if(cc.sys.isMobile)return cc.director.end()}else if(this.restart)return cc.director.loadScene(cc.director.getScene().name)}}),cc._RF.pop()},{}],DylFun:[function(n,t,e){"use strict";cc._RF.push(t,"cf37c2tWt5OiZYmfVX/EJGK","DylFun"),cc.Class({extends:cc.Component,properties:{nextScene:""},onLoad:function(){cc.log("dylfun"),this.myInit(),cc.director.loadScene(this.nextScene)},myInit:function(){cc.dyl=cc.dyl?cc.dyl:{},cc.dyl.getSize=function(n){var t=(n=n.node?n.node:n).getContentSize(),e=[t.width,t.height],c=e[0],o=e[1];return cc.p(c,o)},cc.dyl.addMap=function(n,t,e){for(var c=[],o=0;o<t;o++){c[o]=[];for(var i=0;i<n;i++)c[o][i]=e?e(cc.p(i,o)):null}return c.w=n,c.h=t,c.get=function(n,t){return!!n&&(!(n.x<0||n.y<0||n.x>=this.w||n.y>=this.h)&&(t&&this[n.y][n.x]?this[n.y][n.x][t]:this[n.y][n.x]))},c.set=function(n,t){if(!n)return!1;if(n.x<0||n.y<0||n.x>=this.w||n.y>=this.h)return cc.warn("p不在地图上"),!1;var e=c[n.y][n.x];return c[n.y][n.x]=t,e},c.find=function(n){for(var t=0;t<this.h;t++)for(var e=0;e<this.w;e++)if(this[t][e]===n)return cc.p(e,t);return!1},c.run=function(n){for(var t=[],e=0;e<this.h;e++)for(var c=0;c<this.w;c++){var o=n(cc.p(c,e));(o||0===o)&&t.push(o)}return t},c},cc.dyl.addMapLayer=function(n,t,e){var c=(1-n)*e/2,o=(1-t)*e/2,i=cc.p(c,o),r=this.addMap(n,t,function(n){return i.add(n.mul(e))});r.ori=i.sub(cc.p(e/2,e/2)),r.d=e;var a=function(n){var t=r.w*r.d/2,e=r.h*r.d/2;return n.x>=-t&&n.y>=-e&&n.x<t&&n.y<e};return r.find=function(n){return!!a(n)&&((n=cc.p(n.x,n.y)).subSelf(this.ori),n.mulSelf(1/e),n.x=Math.floor(n.x),n.y=Math.floor(n.y),n)},r},cc.dyl.rand=function(n){"number"!=typeof this.__randNum&&(this.__randNum=1);this.__randNum=(59341*this.__randNum+6541)%9987617;var t=this.__randNum/9987617;return n?Math.floor(t*n):t},cc.dyl.save=function(n,t){t?cc.sys.localStorage.setItem(n,t):cc.sys.localStorage.removeItem(n)},cc.dyl.read=function(n){return cc.sys.localStorage.getItem(n)},cc.dyl.keyOn=function(n){var t={},e={};cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(c,o){for(var i in n)if(c===cc.KEY[i])return void(t[i]===e[i]&&(n[i](!0),t[i]=!t[i]))},onKeyReleased:function(c,o){for(var i in n)if(c===cc.KEY[i])return n[i](!1),void(e[i]=t[i])}},cc.director.getScene().getChildren()[0])}}}),cc._RF.pop()},{}],DylHpLayer:[function(n,t,e){"use strict";cc._RF.push(t,"21290Xbd4hC/pHnD/qyI8fa","DylHpLayer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){var n=this.node.getChildren()[0];n.__lab=n.getComponent(cc.Label),n.active=!1;var t=[],e=[];e.push(n),n.del=function(){this.active=!1,e.push(this);var n=this.__poolId;t[n]=t[t.length-1],t[n].__poolId=n,t.length=t.length-1,this.__poolId=null};var c=function(){var n=null;return e.length<1?n=cc.instantiate(t[0]):(n=e[e.length-1],e.length=e.length-1,n.active=!0),n.__poolId=t.length,t.push(n),n};this.node.add=function(n,t){var e=null;e=(t=Math.floor(t))>0?cc.color(0,255,0):0===t?cc.color(255,255,255):cc.color(255,0,0);var o=c();o.stopAllActions(),o.color=e,o.setPosition(n),o.lab.string=String(t);var i=cc.moveBy(.5,cc.p(0,600)),r=cc.callFunc(function(){o.del()}),a=cc.sequence(i,r);o.runAction(a)}}}),cc._RF.pop()},{}],DylLab:[function(n,t,e){"use strict";cc._RF.push(t,"29266wkxYNE2ZkpowyO+JYL","DylLab"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){for(var n=this,t=this.node.getChildren(),e=t.length-1;e>=0;e--){(function(){var c=t[e],o=c.name;if(!c.getComponent(cc.Label))return"continue";n.node["__lab"+o]=c.getComponent(cc.Label),void 0!==n.node[o]?n.node["__"+o]=n.node[o]:n.node["__"+o]=n.node["__lab"+o].string,Object.defineProperty(n.node,o,{get:function(){return this["__"+o]},set:function(n){this["__"+o]=n,this["__lab"+o].string=String(this["__"+o])}}),n.node[o]=n.node["__"+o]})()}}}),cc._RF.pop()},{}],DylNode:[function(n,t,e){"use strict";cc._RF.push(t,"ba6b10vritAjZLvNRQ8OAx4","DylNode");var c=cc.Enum({Null:0,SmallBig:1,Red:2,Shake:3});cc.Class({extends:cc.Component,properties:{rand:0,isBindNode:!1,touch:!1,run:!1,act:{default:c.Null,type:cc.Enum(c)}},onLoad:function(){this.myInit()},myInit:function(){this.act!==c.Null&&this.setAct(),this.isBindNode&&this.bindNode(cc.director.getScene().getChildren()[0]),this.touch&&this.setTouch(),this.run&&this.setRun(),this.rand&&this.setRand()},bindNode:function(n){"_"===n.name[0]&&(this.node[n.name]=n);for(var t=n.getChildren(),e=t.length-1;e>=0;e--)this.bindNode(t[e])},setTouch:function(){var n=this.node;this.node.touch||(this.node.touch="touch");var t=this.node.touch,e=function(t){var e=t.getLocation();e=cc.p(n.convertToNodeSpace(e));var c=n.getContentSize(),o=[c.width,c.height],i=o[0],r=o[1],a=[i/2,r/2];return i=a[0],r=a[1],e.subSelf(cc.p(i,r)),e.in=function(){for(var n=this.x,t=this.y,e=arguments.length,c=0;c<e;c++)if(function(e){if(!e)return null;var c=[(e=e.node?e.node:e).x,e.y],o=c[0],i=c[1],r=e.getContentSize(),a=[r.width,r.height],u=a[0],s=a[1],d=[u/2,s/2];return u=d[0],s=d[1],u=Math.abs(e.scaleX*u),s=Math.abs(e.scaleY*s),n>=o-u&&n<o+u&&t>=i-s&&t<i+s}(arguments[c]))return arguments[c];return null},e},c={};this.node.on("touchstart",function(o){if(!n.touch)return c=null,null;t=n.touch;var i=e(o);c=n.js[n.touch+"On"]?n.js[n.touch+"On"](i):{}}),this.node.on("touchmove",function(o){if(!c)return null;if(t!==n.touch)return null;var i=e(o);c=n.js[n.touch+"Move"]?n.js[n.touch+"Move"](i,c):{}},this),this.node.on("touchend",function(o){if(!c)return null;if(t!==n.touch)return null;var i=e(o);c=n.js[n.touch+"End"]?n.js[n.touch+"Up"](i,c):n.js[n.touch+"Up"]?n.js[n.touch+"Up"](i,c):{}},this),this.node.on("touchcancel",function(o){if(!c)return null;if(t!==n.touch)return null;var i=e(o);c=n.js[n.touch+"End"]?n.js[n.touch+"Up"](i,c):n.js[n.touch+"Out"]?n.js[n.touch+"Out"](i,c):{}},this)},setRun:function(){var n=this;this.node.run=function(){for(var t=function(){},e=arguments[0],c=function(n,t){return function(){n(),t()}},o=function(t,e){return function(){n.node.js[t](),e()}},i=function(n,t){return function(){var e=n;e.push(function(){return null});for(var c=e.length,o=function(){--c<=0&&t()},i=0;i<e.length;i++)s(e[i],function(){o()})()}},r=function(n,t){return function(){var e=n.node;e.node&&(e=e.node),n.add&&n.add>0?n.easing(cc.easeIn(n.add)):n.add&&n.add<0&&(cc.easeInOut(-n.add),n.easing(cc.easeInOut(-n.add)));var c=cc.callFunc(function(){t()}),o=cc.sequence(n,c);e.runAction(o)}},a=function(n,t){return function(){var c=e;c.node&&(c=c.node),n.add&&n.add>0?n.easing(cc.easeIn(n.add)):n.add&&n.add<0&&(cc.easeInOut(-n.add),n.easing(cc.easeInOut(-n.add)));var o=cc.callFunc(t),i=cc.sequence(n,o);c.runAction(i)}},u=function(n,t){return function(){var c=e;c.node&&(c=c.node);var o=cc.delayTime(n),i=cc.callFunc(t),r=cc.sequence(o,i);c.runAction(r)}},s=function(n,t){return"function"==typeof n?c(n,t):"number"==typeof n?u(n,t):"string"==typeof n?o(n,t):Array.isArray(n)?i(n,t):n.node?r(n,t):a(n,t)},d=arguments.length-1;d>0;d--){var l=arguments[d];t=s(l,t)}t()}},setRand:function(){var n=this.rand;this.node.rand=function(t){var e=(n=(30853*n+253)%4671341)/4671341;return t?Math.floor(e*t):e},this.node.rand.set=function(t){n=t}},setAct:function(){var n=this,t=this.node.getScale(),e=this.node.color,o=e.r,i=e.g,r=e.b,a=cc.color(o,i,r),u=null;this.node.act=function(){if(n.act===c.SmallBig){u&&(n.node.stopAction(u),n.node.setScale(t));var e=cc.scaleTo(.1,1.07*t);e.easing(cc.easeQuadraticActionInOut());var o=cc.scaleTo(.05,1*t);o.easing(cc.easeQuadraticActionInOut());var i=cc.callFunc(function(){u=null}),r=cc.sequence(e,o,i);u=r,n.node.runAction(r)}else n.act===c.Red?(__red++,n.node.color=cc.color(255,0,0),setTimeout(function(){--__red||cc.isValid(n.node)&&(n.node.color=a)})):(n.act,c.Shake)}}}),cc._RF.pop()},{}],DylPhysicsManager:[function(n,t,e){"use strict";cc._RF.push(t,"02af1/RKj1J54Nkg3lWL9z5","DylPhysicsManager"),cc.Class({extends:cc.Component,properties:{isEnabled:!0,isShowDebug:!1,gravity:cc.p(0,-320)},onLoad:function(){cc.director.getPhysicsManager().enabled=this.isEnabled,this.isShowDebug?cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit:cc.director.getPhysicsManager().debugDrawFlags=0,cc.director.getPhysicsManager().gravity=this.gravity}}),cc._RF.pop()},{}],DylPool:[function(n,t,e){"use strict";cc._RF.push(t,"3f0bcwpqD1HzYZVHO9EaeN4","DylPool"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){var n=this.node.getChildren()[0];n.active=!1;var t=[],e=[];e.push(n),n.del=function(){this.active=!1,e.push(this);var n=this.__poolId;t[n]=t[t.length-1],t[n].__poolId=n,t.length=t.length-1,this.__poolId=null},this.node.add=function(){var n=null;return e.length<1?n=cc.instantiate(t[0]):(n=e[e.length-1],e.length=e.length-1,n.active=!0),n.__poolId=t.length,t.push(n),n},this.node.pool=t}}),cc._RF.pop()},{}],DylTileMap:[function(n,t,e){"use strict";cc._RF.push(t,"e9670q7e3pCmJ/VBhRcqTpR","DylTileMap"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){var n=this.node.getComponent(cc.TiledMap),t=n.getMapSize(),e=n.getTileSize().width;this.node.map=cc.dyl.addMap(t.width,t.height),this.node.posMap=cc.dyl.addMapLayer(t.width,t.height,e),this.node.add=function(c,o){var i=node.getChildByName(c).getComponent(cc.TiledLayer);if(i){for(var r=i.getLayerSize(),a=i.getMapTileSize().width,u=r.width-1;u>=0;u--)for(var s=r.height-1;s>=0;s--){var d=i.getTileGIDAt(u,r.height-s-1);o(cc.p(u,s),d)}return map.d=a,map}for(var l=(i=n.getObjectGroup(c)).getObjects(),h=l.length-1;h>=0;h--){var f=l[h].x/e,p=l[h].y/e;o(cc.p(f,t.height-p-1),l[h].name)}}}}),cc._RF.pop()},{}],GameInit:[function(n,t,e){"use strict";cc._RF.push(t,"94412o0K0tB5YKWo8YlGcfz","GameInit"),cc.Class({extends:cc.Component,properties:{difficulty:1},onLoad:function(){var n=cc.dyl.read("level");cc.dyl.level=0|n;var t=[1,2,3,5,7,9,14,15,16],e=[1,2,3,4,5,6,7,8,9,10,11,12,12,12,12,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15];if(cc.dyl.level>=t.length)return cc.dyl.level=0,void cc.director.loadScene("end");this.node.rand.set(t[cc.dyl.level]),this.difficulty=e[cc.dyl.level],this.node.num=0;var c=this.getRandMap();this.initMap(c),this.node._lab.lv=String(cc.dyl.level+1)},initMap:function(n){var t=this.node._map.getChildren(),e=cc.dyl.addMapLayer(3,3,350),c=0,o=cc.dyl.addMap(3,3,function(o){if("number"!=typeof n.get(o))return null;var i=t[c++];return i.setPosition(e.get(o)),i.num=n.get(o),i});this.node.posMap=e,this.node.map=o},getRandMap:function(){var n=cc.dyl.addMap(3,3,function(){return 0}),t=this.node.rand(3),e=this.node.rand(3),c=cc.p(t,e);n[e][t]=null;for(var o=[],i=this.difficulty,r=0;r<i;r++)this.setMap(c,n,o);return cc.ans=function(){for(var n="",t=o.length-1;t>=0;t--)o[t].equals(cc.p(-1,0))?n+="← ":o[t].equals(cc.p(1,0))?n+="→ ":o[t].equals(cc.p(0,1))?n+="↑ ":o[t].equals(cc.p(0,-1))&&(n+="↓ ");return n},this.node.nullPos=c,n},setMap:function(n,t,e){for(var c=cc.p(0,1),o=null,i=1,r=0;r<4;r++){var a=c.add(n);"number"==typeof t.get(a)&&(this.node.rand()<=1/i&&(o=c),i++),c=cc.p(-c.y,c.x)}var u=n.add(o);t.set(n,t.get(u)),t.set(u,null);var s=u.add(o);"number"==typeof t.get(s)&&(t[s.y][s.x]++,t[n.y][n.x]++,this.node.num+=2),e.push(o);var d=[u.x,u.y];n.x=d[0],n.y=d[1]}}),cc._RF.pop()},{}],GameMain:[function(n,t,e){"use strict";cc._RF.push(t,"023e4Yd5VNNe4hwfVLMvHwb","GameMain"),cc.Class({extends:cc.Component,properties:{audio:{default:null,url:cc.AudioClip},winAudio:{default:null,url:cc.AudioClip},loseAudio:{default:null,url:cc.AudioClip}},onLoad:function(){this.node.js=this,this.keyOn()},keyOn:function(){var n=this,t=function(t,e){if("touch"===n.node.touch&&t){var c=n.node.nullPos.sub(e);return n.touchOn(n.node.posMap.get(c))}},e={w:function(n){return t(n,cc.p(0,1))},s:function(n){return t(n,cc.p(0,-1))},a:function(n){return t(n,cc.p(-1,0))},d:function(n){return t(n,cc.p(1,0))},up:function(n){return t(n,cc.p(0,1))},right:function(n){return t(n,cc.p(1,0))},left:function(n){return t(n,cc.p(-1,0))},down:function(n){return t(n,cc.p(0,-1))}};cc.dyl.keyOn(e)},touchOn:function(n){var t=this,e=this.node.posMap.find(n),c=this.node.map.get(e);if(c){var o=this.node.nullPos,i=o.sub(e);if(1===i.mag()){cc.audioEngine.play(this.audio,!1,.7);var r=i.add(o),a=this.node.map.get(r);this.node.map.set(o,c),this.node.map.set(e,null),this.node.run(c,cc.moveBy(.15,i.mul(this.node.posMap.d)),function(){a&&(a.num--,a.act(),c.num--,c.act(),t.node.num-=2,a.num<0||c.num<0?(a.color=cc.color(255,0,0),c.color=cc.color(255,0,0),setTimeout(function(){a.color=cc.color(255,255,255),c.color=cc.color(255,255,255)},100),t.endGame(!1)):0===t.node.num&&t.endGame(!0))}),this.node.nullPos=e}}},endGame:function(n){var t=this;this.node.touch="endGame",n?cc.audioEngine.play(this.winAudio,!1,1):cc.audioEngine.play(this.loseAudio,!1,1),setTimeout(function(){n?(t.node._win.active=!0,t.node._win.act()):(t.node._lose.active=!0,t.node._lose.act())},500)},showAns:function(){this.node._lab.ans=cc.ans()},onAdsResult:function(n,t){cc.log("ads result, resultcode:"+n+", msg: "+t)},nextLevel:function(){cc.dyl.level++,cc.dyl.save("level",cc.dyl.level)}}),cc._RF.pop()},{}],GamePre:[function(n,t,e){"use strict";cc._RF.push(t,"f32e7BwUHlF+72kZrKv5F0D","GamePre"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}]},{},["DylButton","DylFun","DylHpLayer","DylLab","DylNode","DylPhysicsManager","DylPool","DylTileMap","Box","GameInit","GameMain","GamePre"]);